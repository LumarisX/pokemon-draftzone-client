<div class="flex space-x-1">
  <select
    [(ngModel)]="selectedOption"
    (ngModelChange)="onOptionChange()"
    class="border"
  >
    <option *ngFor="let option of options" [ngValue]="option">
      {{ option.name }}
    </option>
  </select>

  <select
    *ngIf="selectedOption && selectedOption.operations.length > 0"
    [(ngModel)]="selectedOperation"
    (ngModelChange)="onOperationChange()"
    class="border"
  >
    <option
      *ngFor="let operation of selectedOption.operations"
      [ngValue]="operation"
    >
      {{ operation }}
    </option>
  </select>

  <div *ngIf="selectedOption.value != ''" class="border w-fit">
    <ng-container [ngSwitch]="selectedOption.query">
      <input
        *ngSwitchCase="'string'"
        class="w-20"
        [(ngModel)]="queryValue"
        (ngModelChange)="onQueryChange()"
        type="text"
        placeholder="Enter text"
      />
      <input
        *ngSwitchCase="'number'"
        class="w-20"
        [(ngModel)]="queryValue"
        (ngModelChange)="onQueryChange()"
        type="number"
        placeholder="Enter number"
      />

      <select
        *ngSwitchCase="'type'"
        (ngModelChange)="onQueryChange()"
        [(ngModel)]="queryValue"
      >
        <option *ngFor="let type of typeOptions" [ngValue]="type">
          {{ type }}
        </option>
      </select>

      <select
        *ngSwitchCase="'eggs'"
        (ngModelChange)="onQueryChange()"
        [(ngModel)]="queryValue"
      >
        <option *ngFor="let egg of eggGroups" [ngValue]="egg">
          {{ egg }}
        </option>
      </select>

      <select
        *ngSwitchCase="'tier'"
        (ngModelChange)="onQueryChange()"
        [(ngModel)]="queryValue"
      >
        <option *ngFor="let tier of tiers" [ngValue]="tier">
          {{ tier }}
        </option>
      </select>

      <input
        *ngSwitchCase="'boolean'"
        (ngModelChange)="onQueryChange()"
        [(ngModel)]="queryValue"
        type="checkbox"
      />
    </ng-container>
  </div>
</div>

<!-- Debugging -->
option
{{ selectedOption | json }}
operation
{{ selectedOperation | json }}
value
{{ queryValue | json }}
