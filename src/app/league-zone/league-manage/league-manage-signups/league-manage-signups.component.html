<h2>League Sign-Ups</h2>

@if (signUps.length > 0) {
  <input
    type="file"
    #logoFileInput
    class="file-input-hidden"
    accept="image/*"
    (change)="onLogoFileSelected($event)"
  />
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Showdown Name</th>
          <th>Discord Name</th>
          <th>Timezone</th>
          <th>Experience</th>
          <th>Dropped</th>
          <th>Signed Up At</th>
          <th>Team Name</th>
          <th>Logo</th>
          <th>Division</th>
        </tr>
      </thead>
      <tbody>
        @for (user of signUps; track user) {
          <tr>
            <td>{{ $index + 1 }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.gameName }}</td>
            <td>{{ user.discordName }}</td>
            <td>{{ user.timezone }}</td>
            <td>{{ user.experience }}</td>
            <td>{{ user.dropped }}</td>
            <td>{{ user.signedUpAt | date: "short" }}</td>
            <td>{{ user.teamName }}</td>
            <td class="logo-cell">
              <button
                type="button"
                class="logo-button"
                (click)="onLogoCellClick(user)"
                [disabled]="!user.id || uploadingForId === user.id"
                [attr.aria-label]="user.logo ? 'Replace logo' : 'Add logo'"
              >
                @if (user.logo) {
                  <img [src]="user.logo" alt="" />
                } @else {
                  <div class="add-logo-btn">
                    <pdz-icon name="add"> </pdz-icon>
                  </div>
                }
              </button>
              @if (user.id && uploadErrorById[user.id]) {
                <div class="logo-error">{{ uploadErrorById[user.id] }}</div>
              }
              @if (uploadingForId === user.id) {
                <div class="logo-uploading">Uploading...</div>
              }
            </td>
            <td>{{ user.division }}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
} @else {
  <p>No sign-ups found for this league.</p>
}
