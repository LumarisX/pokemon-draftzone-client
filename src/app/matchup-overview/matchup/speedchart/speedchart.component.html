<div class="flex w-full px-1 bg-slate-400 dark:bg-slate-500 rounded-t-xl">
  <div class="flex w-full pb-1 border-b border-slate-300 dark:border-slate-600">
    <div class="flex mx-1 mt-2 space-x-1 w-fit">
      <p class="font-bold">Lvl:</p>
      <p class="font-semibold">{{ level }}</p>
    </div>
    <h1 class="w-full text-xl font-bold text-center">Speed Table</h1>
    <div class="relative w-8 mx-1 mt-2 ml-auto">
      <div
        (click)="showFilter = !showFilter"
        class="px-1 rounded-md cursor-pointer bg-slate-300 dark:bg-slate-600 hover:bg-slate-200"
      >
        <img
          class="w-full"
          *ngIf="!showFilter"
          src="../../../assets/icons/filter.svg"
          alt="Filter"
          title="Filter"
        />
        <img
          class="w-full"
          *ngIf="showFilter"
          src="../../../assets/icons/close.svg"
          alt="Close"
          title="Close"
        />
      </div>
      <div
        class="absolute right-0 w-32 p-1 mt-2 bg-white border divide-y rounded-md shadow-lg z-5000"
        *ngIf="showFilter"
      >
        <div
          class="font-semibold text-center rounded hover:bg-slate-100"
          (click)="resetModifiers()"
        >
          Reset
        </div>
        <div
          *ngFor="let modifier of speedchart?.modifiers"
          class="flex items-center py-1 space-x-1 h-fit z-5000"
        >
          <input
            type="checkbox"
            class="accent-cyan-400"
            id="{{ modifier }}"
            name="{{ modifier }}"
            value="{{ modifier }}"
            [(ngModel)]="modifiers[0][modifier]"
          />
          <input
            type="checkbox"
            class="accent-red-400"
            id="{{ modifier }}"
            name="{{ modifier }}"
            value="{{ modifier }}"
            [(ngModel)]="modifiers[1][modifier]"
          />
          <speed-modifier-icon
            class="w-5 h-5"
            [modifier]="modifier"
          ></speed-modifier-icon>
          <label for="{{ modifier }}">{{ modifier }}</label>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="w-full border-4 border-slate-400 dark:border-slate-500 bg-slate-400 dark:bg-slate-500"
>
  <div class="bg-slate-200 dark:bg-slate-700">
    <div
      class="flex space-x-2 border-b-2 border-slate-400 dark:border-slate-500"
    >
      <div class="w-20 font-bold text-center">Base Speed</div>
      <div class="flex items-center justify-end flex-grow ml-auto">
        <div class="flex-grow mr-4 font-bold text-center">Modifiers</div>
        <div class="mr-4 font-bold text-center">Speed</div>
        <div class="w-4"></div>
      </div>
    </div>
  </div>
  <div class="flex">
    <div
      *ngIf="speeds"
      class="border-r-2 border-slate-400 dark:border-slate-500"
    >
      <div
        *ngFor="let s of speeds"
        class="flex w-20 px-2 border-b border-slate-400 dark:border-slate-500"
        [ngClass]="buttonColor(s.team)"
        (click)="toggleView(s)"
      >
        <sprite
          class="w-1/2"
          [ngClass]="viewColor(s)"
          [flipped]="true"
          [pokemon]="s.pokemon"
        ></sprite>
        <div
          class="flex items-center justify-center w-1/2 text-lg font-semibold"
        >
          {{ s.pokemon.baseStats.spe }}
        </div>
      </div>
    </div>
    <div
      *ngIf="speedchart"
      class="w-full overflow-y-auto max-h-192 snap-y snap-mandatory"
    >
      <div *ngFor="let tier of speedchart.tiers">
        <div
          *ngIf="filtered(tier)"
          @growIn
          class="flex space-x-3 border-b snap-start border-slate-400 dark:border-slate-500"
          [ngClass]="teamColor(tier.team)"
        >
          <sprite
            class="w-10 pl-2 h-fit"
            [pokemon]="tier.pokemon"
            [flipped]="true"
          ></sprite>
          <div class="flex items-center min-w-24">
            <div class="flex h-5 space-x-1">
              <speed-modifier-icon
                *ngFor="let modifier of tier.modifiers"
                [modifier]="modifier"
              ></speed-modifier-icon>
            </div>
          </div>
          <div class="flex justify-end flex-grow ml-auto">
            <div class="w-16 text-lg font-semibold text-center">
              {{ tier.speed }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="w-full h-3 rounded-b-full bg-slate-400 dark:bg-slate-500"></div>
