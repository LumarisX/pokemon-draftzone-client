<header>
  <mat-toolbar mat-density="-2">
    <div class="block md:hidden">
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon
          matBadge="1"
          matBadgeSize="small"
          matBadgeOverlap="false"
          [matBadgeHidden]="!(anyBadge$ | async)"
          >menu</mat-icon
        >
      </button>
    </div>

    <mat-menu #menu="matMenu">
      @for (tab of TABS; track $index) {
        <button
          mat-menu-item
          [routerLink]="tab.route"
          [matBadge]="tab.badge | async"
          [matBadgeHidden]="!tab.badge || (tab.badge | async) === ''"
        >
          <span>{{ tab.title }}</span>
        </button>
      }
      <button mat-menu-item [matMenuTriggerFor]="toolsMenu">
        <span>Other Tools</span>
      </button>
    </mat-menu>
    <mat-menu #toolsMenu="matMenu">
      <button mat-menu-item routerLink="/tools/quick-matchup">
        <mat-icon>bolt</mat-icon>
        <span> Quick Matchup </span>
      </button>
      <button mat-menu-item routerLink="/tools/time-converter">
        <mat-icon>calendar_clock</mat-icon>
        <span> Time Converter </span>
      </button>
      <button mat-menu-item routerLink="/tools/pokemon-search">
        <mat-icon>search</mat-icon>
        <span> Pokemon Search </span>
      </button>
    </mat-menu>
    <button
      routerLink="/"
      matBadge="1"
      matBadgeSize="small"
      matBadgeOverlap="false"
      [matBadgeHidden]="!(newsBadge | async)"
    >
      <svg
        id="a"
        class="text-logo-core"
        height="36"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 3805.81135 1493.90552"
      >
        <defs>
          <radialGradient
            id="outer_core"
            cx="1902.90574"
            cy="746.99441"
            fx="1902.90574"
            fy="746.99441"
            r="424.59134"
            gradientUnits="userSpaceOnUse"
          >
            <stop class="ring_1" offset=".33103" />
            <stop class="ring_2" offset=".43832" />
            <stop class="ring_3" offset=".57619" />
            <stop class="ring_4" offset=".70596" />
            <stop class="ring_5" offset=".82377" />
            <stop class="ring_6" offset=".92564" />
            <stop class="ring_7" offset="1" />
          </radialGradient>
          <radialGradient
            id="inner_core_a"
            cx="1902.90574"
            cy="746.99441"
            fx="1902.90574"
            fy="746.99441"
            r="260"
            gradientUnits="userSpaceOnUse"
            gradientTransform="translate(-20,-30)"
          >
            <stop offset="0" class="core_1" stop-opacity="0" />
            <stop offset="1" class="core_2" stop-opacity="1" />
          </radialGradient>
          <radialGradient
            id="inner_core_b"
            cx="1902.90574"
            cy="746.99441"
            fx="1902.90574"
            fy="746.99441"
            r="240"
            gradientUnits="userSpaceOnUse"
            gradientTransform="translate(-80,-120)"
          >
            <stop offset="0" class="core_1" />
            <stop offset="1" class="core_2" />
          </radialGradient>
        </defs>
        <path
          class="fill-logo-background"
          id="background"
          d="M3716.79206,421.44336l-1204.56885-106.49902c-62.7616-88.44971-144.54529-162.75562-238.76862-216.6543C2161.10334,33.98315,2032.98011,0,1902.90577,0c-155.03186,0-303.72339,47.07104-429.97705,136.09204-123.40735,87.06836-216.49255,207.46875-269.4165,348.27271-4.14526,11.05542-6.17761,22.60278-6.17761,34.14624H95.60487C42.76234,518.51099,.00013,561.35425,.00013,614.11353v361.11816c-.0813,50.32227,38.29053,92.84399,88.93799,97.31372l1204.56885,106.41577c62.76147,88.44958,144.54529,162.75562,238.76855,216.6582,112.35132,64.30273,240.47461,98.28613,370.63025,98.28613,154.95056,0,303.64203-46.99158,429.89563-136.09216,122.5957-86.33777,215.27283-205.76184,268.35968-345.34729,4.71484-11.45996,7.31586-23.97998,7.31586-37.15088h1101.64825c52.84265,0,95.68604-42.76416,95.68604-95.60669v-361.03491c.08142-50.32202-38.37164-92.7605-89.01917-97.23022Z"
        />
        <path
          id="logo_top"
          class="logo-top"
          d="M3708.25551,518.67366h-1362.93415c-82.8416-159.99284-249.9052-269.41754-442.41562-269.41754s-359.49364,109.26195-442.25287,269.25479c0,.07939-.08138,.07939-.08138,.16275h-165.68121c0-.08336,.08038-.08336,.08038-.16275,92.35265-245.92175,329.73787-420.87187,607.93507-420.87187,234.45868,0,439.81358,124.13983,553.95411,310.3873l1251.39566,110.64732Z"
        />
        <path
          id="logo_bottom"
          class="logo-bottom"
          d="M2510.9212,975.39456c-92.35165,246.00511-329.73787,421.03462-608.01546,421.03462-234.45868,0-439.89496-124.21922-553.95411-310.47066L97.55597,975.39456H1460.65287c82.67884,159.99284,249.74245,269.33815,442.25287,269.33815s359.57403-109.34531,442.33425-269.33815h165.68121Z"
        />
        <path
          id="D"
          class="logo-top"
          d="M215.11032,607.44874H120.15662c-15.12201,0-22.35652,7.96689-22.35652,24.38893v250.47483c0,16.42204,7.23451,24.38893,22.35652,24.38893h94.95369c34.95787,0,62.67924-9.51105,82.8406-28.94201,25.28407-24.38893,38.45306-64.38615,38.45306-120.48388,0-101.04894-42.68063-149.82681-121.29366-149.82681Zm-70.24025,57.63791c0-3.98146,1.62652-5.28348,5.20309-5.28348h65.03716c52.27306,0,74.2237,28.77926,74.2237,97.06748,0,68.69709-21.95064,97.55574-74.2237,97.55574h-65.03716c-3.57657,0-5.20309-1.3814-5.20309-5.36684v-183.97291Z"
        />
        <path
          id="R"
          class="logo-top"
          d="M629.23394,906.70144h-52.19168l-15.36515-28.94201-46.09544-86.74267h-70.23926c-4.39033,0-6.74824,2.19516-6.74824,7.55803v108.12666h-47.07096v-118.3681c0-33.65784,12.7641-47.39646,42.27376-47.39646h104.87361c26.74586,0,37.55793-20.4035,37.55793-41.70412s-11.62484-39.42957-37.55793-39.42957h-147.55424v-52.35444h146.00909c60.64782,0,86.58091,41.70412,86.58091,89.58884,0,37.23441-16.01516,77.14826-57.07026,89.99374l47.47685,90.72811,15.12102,28.94201Z"
        />
        <path
          id="A"
          class="logo-top"
          d="M949.62352,906.70144h-52.27405l-9.83655-28.94201-71.94716-211.77566c-2.35692-7.07374-6.74725-10.16206-13.16998-10.16206-6.34136,0-10.73169,3.08831-13.49549,10.16206l-75.19921,211.77566-10.24244,28.94201h-51.86817l10.32481-28.94201,84.22399-237.06171c9.9993-27.88214,28.37238-38.53245,56.66339-38.53245,27.9655,0,46.33858,10.65031,55.84963,38.53245l81.05331,237.06171,9.91793,28.94201Z"
        />
        <path
          id="F"
          class="logo-top"
          d="M1034.2534,710.28796v28.37437h162.34877v49.67102h-162.34877v118.3681h-47.07096v-195.92523c0-59.83307,27.88413-103.32747,99.34402-103.32747h111.70124v52.35444h-108.53056c-42.68063,0-55.44374,22.59867-55.44374,50.48478Z"
        />
        <polygon
          id="T"
          class="logo-top"
          points="1437.56496 607.44874 1437.56496 659.80318 1359.03231 659.80318 1359.03231 906.70144 1311.55546 906.70144 1311.55546 659.80318 1232.94144 659.80318 1232.94144 607.44874 1437.56496 607.44874"
        />
        <path
          id="Z"
          class="logo-bottom"
          d="M2461.25018,849.05956h197.30664v52.35841h-200.80282c-47.88373,0-72.27266-23.98404-72.27266-65.60877,0-30.72831,12.92685-51.78679,39.02269-65.6048,2.92655-1.62752,6.01586-3.08831,9.26692-4.47369l162.26838-69.58627c9.75617-3.98543,15.5279-11.95232,15.5279-22.19774,0-11.54346-7.56101-19.51035-22.60065-19.51035h-192.83493v-52.27108h196.4115c21.54376,0,38.37168,4.79522,50.4034,13.98077,14.71513,11.05521,22.27614,28.61651,22.27614,51.62404,0,34.1461-15.93478,56.25651-47.88373,69.99513l-163.16253,69.6736c-9.26692,3.98146-15.03865,11.94835-15.03865,22.11041,0,11.54346,7.56001,19.51035,22.1124,19.51035Z"
        />
        <path
          id="O"
          class="logo-bottom"
          d="M2950.49164,616.14604c-19.10447-9.3483-41.94825-13.98077-68.45097-13.98077h-40.81098c-26.50272,0-49.42888,4.63247-68.45197,13.98077-43.41203,21.05848-66.74506,66.33917-66.74506,136.25491,0,100.23915,47.88472,149.01702,135.19702,149.01702h40.81098c87.39368,0,135.27642-48.77787,135.27642-149.01702,0-69.91574-23.33105-115.27979-66.82544-136.25491Zm-68.45097,232.91353h-40.81098c-58.04677,0-82.8416-28.3704-82.8416-96.65862,0-68.69709,25.28308-97.9646,82.8416-97.9646h40.81098c57.63791,0,82.5151,29.26751,82.5151,97.55574,0,68.69709-24.87719,97.06748-82.5151,97.06748Z"
        />
        <path
          id="N"
          class="logo-bottom"
          d="M3396.80934,602.16527v238.9274c0,39.42957-22.60065,65.60877-68.69609,65.60877-41.70412,0-60.72821-21.30062-73.1668-55.36336l-87.31231-191.13001c-3.98345-8.86004-9.3483-12.8415-18.6172-12.8415-11.95034,0-18.21032,6.66488-18.21032,17.31519v236.73621h-52.27306v-239.41963c0-18.6966,5.12172-34.55099,15.68966-45.85231,11.21994-12.27386,28.77926-19.3476,53.00544-19.3476,23.8203,0,40.16096,6.99038,51.94954,19.3476,9.02279,9.26891,15.44553,21.54276,20.73,36.09515l87.39368,191.04665c3.49618,7.1571,9.26791,12.44058,19.02309,12.44058,11.05719,0,17.72306-6.66885,17.72306-16.83091v-236.73224h52.76131Z"
        />
        <path
          id="E"
          class="logo-bottom"
          d="M3708.09276,849.05956v52.35841h-151.61708c-70.97164,0-99.7509-35.03925-99.7509-81.62195,0-34.1461,15.52691-57.15363,43.00614-68.69709-27.96649-11.54346-42.112-34.55099-42.112-67.39507,0-29.43027,11.21895-53.41034,36.09614-67.55782,15.68966-9.02279,36.82753-13.98077,64.06065-13.98077h149.91116v52.27108h-149.91116c-31.46069,0-45.20031,14.63574-45.20031,37.72266,0,24.38893,15.5279,35.44414,45.68856,35.44414h147.14637v47.47982h-148.52778c-30.08028,0-45.60818,11.94835-45.60818,36.33729,0,23.49578,14.63376,37.6393,45.2013,37.6393h151.61708Z"
        />
        <circle
          cx="1902.90574"
          cy="746.99441"
          fx="1902.90574"
          fy="746.99441"
          r="240"
          fill="url(#inner_core_b)"
        />
        <circle
          cx="1902.90574"
          cy="746.99441"
          fx="1902.90574"
          fy="746.99441"
          r="240"
          fill="url(#inner_core_a)"
        />
        <path
          id="core_radial"
          d="M1902.90574,322.42292c-50.40439,0-98.69401,8.78065-143.5698,24.87719l53.4937,129.01841c28.85964-9.67777,59.10268-14.55238,90.07611-14.55238,31.05481,0,61.29685,4.87461,90.15748,14.55238l53.41232-129.01841c-44.8758-16.09654-93.16541-24.87719-143.5698-24.87719Zm358.02888,196.25074c-42.92377-67.15293-104.30199-121.45642-176.90115-155.76526l-53.41034,129.01841c46.09445,23.00753,84.79164,57.80066,112.83852,101.69995,5.20309,8.21301,10.16206,16.74754,14.55238,25.69095l94.2223-39.02071,34.79512-14.38963v-.08336c-7.72376-16.33868-16.50342-32.11368-26.09683-47.15035Zm41.70611,84.78965v-.07939l-50.40439,20.89176-78.61402,32.51858c9.67479,29.02537,14.55238,59.26543,14.55238,90.23985s-4.87759,61.21845-14.55238,90.15649l78.61402,32.51858,50.40439,20.89573c16.09654-44.8758,24.8762-93.16541,24.8762-143.5708,0-50.32202-8.77966-98.77439-24.8762-143.5708Zm-50.40439,310.22851l-94.2223-39.02071c-4.39033,8.93943-9.34929,17.55733-14.55238,25.77034-28.04688,43.81593-66.74407,78.69242-112.83852,101.62056l53.32995,128.93505c72.59816-34.14213,133.97639-88.37019,176.98153-155.60251,0,0,0-.07939,.08138-.07939,9.59342-15.12003,18.2917-30.81167,26.01546-47.15035l-34.79512-14.47299Zm-259.25449,103.97847c-28.86064,9.6738-59.10268,14.55238-90.07611,14.55238-30.89205,0-61.13509-4.87858-90.07611-14.55238l-53.4937,129.01841c44.8758,16.09654,93.16541,24.87719,143.5698,24.87719s98.69401-8.78065,143.5698-24.87719l-53.4937-129.01841Zm-360.79268-360.79268l-78.61501-32.60194-50.4034-20.81237c-16.09654,44.79641-24.8762,93.24877-24.8762,143.5708s8.77966,98.695,24.8762,143.48744l50.4034-20.81237,78.61501-32.59797c-9.67479-29.02537-14.55238-59.18604-14.55238-90.0771,0-30.97442,4.87759-61.21448,14.55238-90.15649Zm30.16066,243.56384c-5.28447-8.21301-10.16206-16.83091-14.55238-25.77034l-94.2233,39.02071-34.79413,14.38963c7.64238,16.34265,16.42204,32.03032,26.01546,47.15035,0,.08336,.08138,.08336,.08138,.16275,42.92377,67.15293,104.30199,121.46039,176.90016,155.60251l53.41133-128.93505c-46.09445-22.92814-84.79164-57.80463-112.83852-101.62056Zm59.42719-537.53306c-72.51679,34.22549-133.81363,88.53294-176.81977,155.60251,0,.07939-.08038,.07939-.08038,.16275-9.67479,15.12003-18.37308,30.89106-26.09683,47.23371l34.79413,14.38963,94.2233,39.1001c4.39033-8.93943,9.34929-17.55733,14.63376-25.84973,27.9655-43.8199,66.66269-78.61303,112.83852-101.62056l-53.49271-129.01841Z"
          fill="url(#outer_core)"
        />
      </svg>
    </button>
    <div class="tab-container hidden md:flex">
      @for (tab of TABS; track $index) {
        <button
          class="menu-tab"
          [routerLink]="tab.route"
          [matBadge]="tab.badge | async"
          [matBadgeHidden]="!tab.badge || (tab.badge | async) === ''"
        >
          <span>{{ tab.title }}</span>
        </button>
      }
      <button class="menu-tab" [matMenuTriggerFor]="toolsMenu">
        <span>Other Tools</span>
      </button>
    </div>
    <span class="toolbar-spacer"></span>
    <!-- {{ auth.state$ | async | json }} -->
    @let user = auth.user$ | async;
    <div class="flex flex-col items-center justify-center h-full">
      @if (authenticated && user) {
        <button mat-stroked-button [matMenuTriggerFor]="userMenu">
          <div class="user-info-container">
            <img class="user-icon" src="{{ user.picture }}" />
            @if (user.username && user.username !== "") {
              <span class="username-text">{{ user.username }}</span>
            }
          </div>
        </button>
        <mat-menu #userMenu="matMenu">
          <button
            mat-menu-item
            cdkOverlayOrigin
            #trigger="cdkOverlayOrigin"
            (click)="settingsOpen = !settingsOpen"
          >
            <mat-icon>settings</mat-icon>
            <span>Settings</span>
          </button>
          <ng-template
            cdkConnectedOverlay
            [cdkConnectedOverlayOrigin]="trigger"
            [cdkConnectedOverlayOpen]="settingsOpen"
            (overlayOutsideClick)="settingsOpen = false"
            (detach)="settingsOpen = false"
            [cdkConnectedOverlayFlexibleDimensions]="true"
            [cdkConnectedOverlayPush]="true"
            [cdkConnectedOverlayHasBackdrop]="true"
          >
            <settings (closeSettings)="settingsOpen = false"></settings>
          </ng-template>
          <button mat-menu-item (click)="logout()">
            <mat-icon>logout</mat-icon>
            <span>Log Out</span>
          </button>
        </mat-menu>
      } @else {
        <button mat-stroked-button (click)="login()">
          <span>Log in</span> <mat-icon>login</mat-icon>
        </button>
      }
    </div>
  </mat-toolbar>
</header>
