<div class="page-header">
  <div class="page-header__left">
    <button routerLink="../" class="back-btn" aria-label="Back">Back</button>
    <h1 class="page-header__title">My Leagues</h1>
    <div class="page-header__actions"></div>
  </div>
  <button routerLink="new" class="add-league-btn" aria-label="Add new league">
    <mat-icon>add</mat-icon>
  </button>
</div>

<div class="toolbar">
  <div class="toolbar__results">
    @if (filteredLeagues) {
      Results: {{ filteredLeagues.length }}
    }
  </div>
  <div class="toolbar__controls">
    <button
      (click)="filterLeagues('All')"
      class="filter-btn"
      [class.selected]="currentFilter === 'All'"
    >
      All
    </button>
    <button
      (click)="filterLeagues('Pending')"
      class="filter-btn filter-pending"
      [class.selected]="currentFilter === 'Pending'"
    >
      Pending
    </button>
    <button
      (click)="filterLeagues('Approved')"
      class="filter-btn filter-approved"
      [class.selected]="currentFilter === 'Approved'"
    >
      Approved
    </button>
    <button
      (click)="filterLeagues('Denied')"
      class="filter-btn filter-denied"
      [class.selected]="currentFilter === 'Denied'"
    >
      Denied
    </button>
  </div>
</div>

@if (filteredLeagues.length) {
  <div class="leagues-grid">
    @for (league of filteredLeagues; track league._id; let i = $index) {
      <pdz-league-ad
        [league]="league"
        [index]="i"
        mode="manage"
        (delete)="deleteLeague($event)"
      ></pdz-league-ad>
    }
  </div>
} @else {
  <div class="empty-state">
    <p class="empty-state__message">
      You haven't posted any league ads yet.
      <a routerLink="new" class="empty-state__link">Add your first!</a>
    </p>
  </div>
}
