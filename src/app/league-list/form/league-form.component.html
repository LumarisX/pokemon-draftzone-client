<div class="league-form-container">
  <header class="form-header">
    <h1>Create League Advertisement</h1>
    <p class="form-description">
      Fill out the form below to advertise your league to potential players
    </p>
  </header>

  <form [formGroup]="leagueForm" (ngSubmit)="onSubmit()" class="league-form">
    <!-- League Name -->
    <div class="form-field">
      <label for="leagueName" class="form-label">
        League Name <span class="required">*</span>
      </label>
      <input
        id="leagueName"
        type="text"
        formControlName="leagueName"
        class="form-input"
        [class.is-invalid]="isFieldInvalid('leagueName')"
        placeholder="Enter your league name"
        [maxlength]="LEAGUE_NAME_MAX_LENGTH"
      />
      @if (isFieldInvalid("leagueName")) {
        <span class="error-message"
          >League name is required (max
          {{ LEAGUE_NAME_MAX_LENGTH }} characters)</span
        >
      }
    </div>

    <!-- Description -->
    <div class="form-field">
      <label for="description" class="form-label">
        Description <span class="required">*</span>
      </label>
      <textarea
        id="description"
        formControlName="description"
        class="form-textarea"
        [class.is-invalid]="isFieldInvalid('description')"
        placeholder="Describe your league, rules, and what makes it unique"
        rows="4"
        [maxlength]="DESCRIPTION_MAX_LENGTH"
      ></textarea>
      @if (isFieldInvalid("description")) {
        <span class="error-message"
          >Description is required (max
          {{ DESCRIPTION_MAX_LENGTH }} characters)</span
        >
      }
    </div>

    <div class="form-row">
      <!-- Signup Link -->
      <div class="form-field">
        <label for="signupLink" class="form-label">
          Signup Link <span class="required">*</span>
        </label>
        <input
          id="signupLink"
          type="text"
          formControlName="signupLink"
          class="form-input"
          [class.is-invalid]="isFieldInvalid('signupLink')"
          placeholder="Link to your league signup form or page"
          maxlength="100"
        />
        @if (isFieldInvalid("signupLink")) {
          <span class="error-message">Signup link is required</span>
        }
      </div>

      <!-- Prize Value -->
      <div class="form-field">
        <label for="prizeValue" class="form-label"> Prize Value </label>
        <select
          id="prizeValue"
          formControlName="prizeValue"
          class="form-select"
        >
          <option value="0">None</option>
          <option value="1">Small (&lt; $25)</option>
          <option value="2">Medium ($25-$100)</option>
          <option value="3">Large (&gt; $100)</option>
        </select>
      </div>
    </div>

    <div class="form-row">
      <!-- Server Link -->
      <div class="form-field">
        <label for="serverLink" class="form-label"> Server Link </label>
        <input
          id="serverLink"
          type="text"
          formControlName="serverLink"
          class="form-input"
          placeholder="Discord server invite link (optional)"
        />
      </div>

      <!-- League Documents Link -->
      <div class="form-field">
        <label for="leagueDoc" class="form-label"> League Documents </label>
        <input
          id="leagueDoc"
          type="text"
          formControlName="leagueDoc"
          class="form-input"
          [class.is-invalid]="isFieldInvalid('leagueDoc')"
          placeholder="Google Doc or other league info link (optional)"
          maxlength="100"
        />
      </div>
    </div>

    <!-- Skill Level Range -->
    <div formGroupName="skillLevelRange">
      <label class="form-label"> Skill Level Range </label>
      <div class="form-row">
        <div class="form-field form-field--inline">
          <label for="skillLevelFrom" class="form-label-inline">From</label>
          <select
            id="skillLevelFrom"
            formControlName="from"
            class="form-select"
          >
            <option value="0">Novice</option>
            <option value="1">Intermediate</option>
            <option value="2">Advanced</option>
            <option value="3">Expert</option>
          </select>
        </div>

        <div class="form-field form-field--inline">
          <label for="skillLevelTo" class="form-label-inline">To</label>
          <select id="skillLevelTo" formControlName="to" class="form-select">
            <option value="0">Novice</option>
            <option value="1">Intermediate</option>
            <option value="2">Advanced</option>
            <option value="3">Expert</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Multi-Select Game Settings -->
    <div class="form-row form-row--three">
      <!-- Platforms -->
      <div class="form-field">
        <label class="form-label">
          Platform(s) <span class="required">*</span>
        </label>
        <div
          class="checkbox-group"
          [class.is-invalid]="isFieldInvalid('platforms')"
          formArrayName="platforms"
        >
          @for (platform of platforms; track platform; let i = $index) {
            <label class="checkbox-item">
              <input type="checkbox" [formControlName]="i" />
              <span class="checkbox-label">{{ platform }}</span>
            </label>
          }
        </div>
        @if (isFieldInvalid("platforms")) {
          <span class="error-message">Select at least one platform</span>
        }
      </div>

      <!-- Formats -->
      <div class="form-field">
        <label class="form-label">
          Format(s) <span class="required">*</span>
        </label>
        <div
          class="checkbox-group"
          [class.is-invalid]="isFieldInvalid('formats')"
          formArrayName="formats"
        >
          @for (format of formats; track format; let i = $index) {
            <label class="checkbox-item">
              <input type="checkbox" [formControlName]="i" />
              <span class="checkbox-label">{{ format }}</span>
            </label>
          }
        </div>
        @if (isFieldInvalid("formats")) {
          <span class="error-message">Select at least one format</span>
        }
      </div>

      <!-- Rulesets -->
      <div class="form-field">
        <label class="form-label">
          Ruleset(s) <span class="required">*</span>
        </label>
        <div
          class="checkbox-group"
          [class.is-invalid]="isFieldInvalid('rulesets')"
          formArrayName="rulesets"
        >
          @for (ruleset of rulesets; track ruleset; let i = $index) {
            <label class="checkbox-item">
              <input type="checkbox" [formControlName]="i" />
              <span class="checkbox-label">{{ ruleset }}</span>
            </label>
          }
        </div>
        @if (isFieldInvalid("rulesets")) {
          <span class="error-message">Select at least one ruleset</span>
        }
      </div>
    </div>

    <!-- Dates Section -->
    <div class="form-row form-row--three">
      <!-- Closes At -->
      <div class="form-field">
        <label for="closesAt" class="form-label">
          Registration Closes <span class="required">*</span>
        </label>
        <input
          id="closesAt"
          type="date"
          formControlName="closesAt"
          class="form-input"
          [class.is-invalid]="isFieldInvalid('closesAt')"
        />
        @if (isFieldInvalid("closesAt")) {
          <span class="error-message">Registration close date is required</span>
        }
      </div>

      <!-- Season Start -->
      <div class="form-field">
        <label for="seasonStart" class="form-label"> Season Start Date </label>
        <input
          id="seasonStart"
          type="date"
          formControlName="seasonStart"
          class="form-input"
        />
      </div>
      <!-- Season End -->
      <div class="form-field">
        <label for="seasonEnd" class="form-label"> Season End Date </label>
        <input
          id="seasonEnd"
          type="date"
          formControlName="seasonEnd"
          class="form-input"
        />
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button
        type="button"
        routerLink="/league-list"
        class="form-button form-button--secondary"
        [disabled]="isSubmitting"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="form-button form-button--primary"
        [disabled]="isSubmitting"
      >
        @if (isSubmitting) {
          <span>Creating...</span>
        } @else {
          <span>Create League Ad</span>
        }
      </button>
    </div>
  </form>
</div>
