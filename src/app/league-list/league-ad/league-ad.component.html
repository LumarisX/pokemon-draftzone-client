<div class="league-ad-card" [ngClass]="teamClass">
  <div class="card-header">
    <h2 class="card-title">{{ league.leagueName }}</h2>
    <div class="header-right">
      @if (mode === "manage") {
        <div class="status-badge" [ngClass]="getStatusClass(league.status)">
          {{ league.status | titlecase }}
        </div>
      } @else {
        <div class="tag-icons">
          @for (skill of league.skillLevels; track skill) {
            <div class="tag-icon">
              <ball-svg [ballType]="SKILLBALLS[skill]"></ball-svg>
            </div>
          }
          @if (league.prizeValue) {
            <div class="tag-icon">
              <coin-svg></coin-svg>
            </div>
          }
        </div>
      }
    </div>
  </div>

  <div class="card-body">
    <div class="description-section">
      <div class="meta-grid">
        <div class="meta-item">
          <span class="meta-label"
            >{{ "Format" + (league.formats.length > 1 ? "s" : "") }}
          </span>
          <span class="meta-value">{{ league.formats.join(", ") }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label"
            >{{ "Ruleset" + (league.rulesets.length > 1 ? "s" : "") }}
          </span>
          <span class="meta-value">{{ league.rulesets.join(", ") }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label"
            >{{ "Platform" + (league.platforms.length > 1 ? "s" : "") }}
          </span>
          <span class="meta-value">{{ league.platforms.join(", ") }}</span>
        </div>
        <div class="meta-item">
          <span class="meta-label">Closes At</span>
          <span class="meta-value">{{ league.closesAt | date }}</span>
        </div>
      </div>

      @if (league.description) {
        <div class="description-content">
          <span class="description-label">About</span>

          <div class="markdown-preview">
            <markdown [data]="league.description"></markdown>
          </div>
        </div>
      }
    </div>

    @if (mode === "manage") {
      <div class="league-details">
        @if (league.leagueDoc) {
          <div class="link-section">
            <label>Details:</label>
            <a
              [href]="formatLink(league.leagueDoc)"
              target="_blank"
              rel="noopener noreferrer"
            >
              {{ league.leagueDoc }}
            </a>
          </div>
        }

        @if (league.signupLink) {
          <div class="link-section">
            <label>Signup:</label>
            <a
              [href]="formatLink(league.signupLink)"
              target="_blank"
              rel="noopener noreferrer"
            >
              {{ league.signupLink }}
            </a>
          </div>
        }
      </div>
    }

    <div class="league-info-section">
      @if (league.seasonStart || league.seasonEnd) {
        <div class="info-item">
          <strong>Season:</strong>
          <span class="info-content">
            {{ league.seasonStart | date }}
            @if (league.seasonEnd) {
              - {{ league.seasonEnd | date }}
              @if (weeks) {
                ({{ weeks }} weeks)
              }
            }
          </span>
        </div>
      }

      @if (league.prizeValue > 0) {
        <div class="info-item prize-section">
          <strong>Prize Pool:</strong>
          <div class="prize-icons">
            <div class="prize-icon">
              <coin-svg></coin-svg>
            </div>
          </div>
        </div>
      }
    </div>
  </div>

  <div class="card-footer">
    @if (mode === "public") {
      @if (league.serverLink) {
        <a
          [href]="getExternalLinkUrl(league.serverLink)"
          class="footer-link details-button"
          target="_blank"
          rel="noopener noreferrer"
        >
          Join Server
        </a>
      }
      @if (league.leagueDoc) {
        <a
          [href]="getExternalLinkUrl(league.leagueDoc)"
          class="footer-link details-button"
          target="_blank"
          rel="noopener noreferrer"
        >
          View Details
        </a>
      }
      <a
        [href]="getExternalLinkUrl(league.signupLink)"
        class="footer-link signup-button"
        target="_blank"
        rel="noopener noreferrer"
      >
        Sign Up
      </a>
    } @else {
      <button
        class="delete-btn"
        (click)="onDelete()"
        aria-label="Delete league"
      >
        Delete
      </button>
    }
  </div>
</div>
