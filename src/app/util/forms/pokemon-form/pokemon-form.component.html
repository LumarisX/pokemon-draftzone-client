<form [formGroup]="pokemonForm" autocomplete="off">
  <div class="grid items-center w-full grid-cols-8">
    <sprite
      class="col-span-2 sm:col-span-1"
      [pokemon]="{
        id: pokemonForm.value.id,
        name: pokemonForm.value.name,
        shiny: pokemonForm.value.shiny
      }"
    ></sprite>
    <div class="col-span-6 sm:col-span-4">
      <label class="p-1 font-semibold">Name</label>
      <select-search
        [placeholder]="'Select a Pokemon'"
        [items]="names"
        class="w-full rounded-lg text-medium"
        [ngClass]="['bg-' + color + (colorValue ? '-' + colorValue : '')]"
        [startItem]="{ id: pokemonForm.value.id }"
        (itemSelected)="resultSelected($event)"
      ></select-search>
      @if (pokemonForm.get('name')?.touched &&
      pokemonForm.get('name')?.invalid){ Invalid name }
    </div>
    <div class="col-span-3 sm:col-span-1 flex justify-center">
      <div
        (click)="toggleControl('shiny')"
        class="w-full hover:cursor-pointer h-full max-w-9 aspect-square p-0.5 border-2 rounded-full"
        [ngClass]="[
          'bg-' + color + (colorValue ? '-' + colorValue : ''),
          'hover:bg-' + color + (colorValue ? '-' + (colorValue + 100) : ''),
          'border-' + color + (colorValue ? '-' + (colorValue + 300) : '')
        ]"
      >
        @if (pokemonForm.get('shiny')?.value) {
        <shiny-svg></shiny-svg>
        } @else {
        <circle-svg></circle-svg>
        }
      </div>
    </div>
    <div class="col-span-3 sm:col-span-1 flex flex-col items-center">
      <div
        (click)="toggleControl('captCheck')"
        class="w-full hover:cursor-pointer h-full max-w-9 aspect-square p-0.5 border-2 rounded-full"
        [ngClass]="[
          'bg-' + color + (colorValue ? '-' + colorValue : ''),
          'hover:bg-' + color + (colorValue ? '-' + (colorValue + 100) : ''),
          'border-' + color + (colorValue ? '-' + (colorValue + 300) : '')
        ]"
      >
        <badge-svg [selected]="pokemonForm.get('captCheck')?.value"></badge-svg>
      </div>
      @if(pokemonForm.get('captCheck')?.value){
      <div formGroupName="capt" class="flex items-center justify-center">
        <label class="p-1">
          Z:
          <input
            type="checkbox"
            formControlName="z"
            class="p-1 mx-1 text-center rounded-full text-medium"
          />
        </label>
        <label class="p-1"
          >Tera
          <input
            type="checkbox"
            formControlName="teraCheck"
            class="mx-1 text-medium"
          />
        </label>
      </div>
      }
    </div>
    <div class="flex items-center justify-center col-span-2 sm:col-span-1">
      <div
        class="w-full hover:cursor-pointer h-full max-w-9 aspect-square p-0.5 border-2 rounded-full"
        [ngClass]="[
          'bg-' + color + (colorValue ? '-' + colorValue : ''),
          'hover:bg-' + color + (colorValue ? '-' + (colorValue + 100) : ''),
          'border-' + color + (colorValue ? '-' + (colorValue + 300) : '')
        ]"
        (click)="deletePokemonEvent.emit(formIndex)"
        title="Delete"
      >
        <trash-svg></trash-svg>
      </div>
    </div>
  </div>
  <div formGroupName="capt" class="w-full px-8 col-span-full">
    @if (pokemonForm.get('capt.teraCheck')?.value &&
    pokemonForm.get('captCheck')?.value) {
    <div formGroupName="tera" class="flex justify-between">
      <div class="flex justify-center p-1">
        <button
          class="bg-menu-100 text-sm px-2 w-fit border-2 rounded-lg border-menu-300 text-center hover:bg-menu-200"
          (click)="allTera()"
        >
          All
        </button>
      </div>

      @for (type of teraTypes; track $index) {
      <div class="flex justify-center items-center space-x-1">
        <div
          class="relative flex items-center justify-center cursor-pointer"
          (click)="toggleTeraType(type)"
          [ngClass]="{
            'opacity-40': !pokemonForm.get('capt.tera.' + type)?.value,
          }"
        >
          <img
            class="h-6 aspect-square sprite-border p-0.5 rounded-full"
            src="../../../assets/icons/tera_types/Tera{{ type }}.png"
            onerror="this.src='../../../assets/icons/types/Unknown.png'"
            alt="{{ type }}"
          />
        </div>
      </div>
      }
    </div>
    }
  </div>
  <!-- {{ pokemonForm.value | json }} -->
</form>
