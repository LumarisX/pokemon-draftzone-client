@if (opponentForm) {
  <mat-stepper
    #stepper
    class="pokemon-form-container alternate"
    orientation="vertical"
    linear
  >
    <mat-step
      state="details"
      [stepControl]="opponentForm.controls.details"
      errorMessage="Name is required."
    >
      <form [formGroup]="opponentForm.controls.details">
        <ng-template matStepLabel>Details</ng-template>
        <ng-template matStepContent>
          <div class="details-form-container">
            <div class="league-container details-container">
              <mat-form-field>
                <mat-label>Team Name</mat-label>
                <input matInput formControlName="teamName" spellcheck="false" />
              </mat-form-field>
              <mat-form-field>
                <mat-label>Coach Name</mat-label>
                <input matInput formControlName="coach" spellcheck="false" />
              </mat-form-field>
              <mat-form-field>
                <mat-label>Stage</mat-label>
                <input matInput formControlName="stage" spellcheck="false" />
              </mat-form-field>
            </div>
          </div>
          <div class="button-bar">
            <div class="button-spacer"></div>
            <button type="button" mat-flat-button matStepperNext>Next</button>
          </div>
        </ng-template>
      </form>
    </mat-step>
    <mat-step state="team">
      <ng-template matStepLabel>Team</ng-template>
      <ng-template matStepContent>
        <div class="team-container">
          <team-form
            [ruleset]="ruleset ?? 'Gen9 NatDex'"
            [pokemonList$]="pokemonList$"
            [teamArray]="opponentForm.controls.team"
            (isImporting)="isImporting = $event"
          ></team-form>
        </div>

        <div class="button-bar">
          <button type="button" mat-flat-button matStepperPrevious>Back</button>
          <div class="button-spacer"></div>
          @if (!isImporting) {
            <button type="submit" mat-flat-button (click)="onSubmit()">
              Submit
            </button>
          }
        </div>
      </ng-template>
    </mat-step>

    <ng-template matStepperIcon="details">
      <mat-icon>info</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="team">
      <mat-icon>workspaces</mat-icon>
    </ng-template>
  </mat-stepper>
}
