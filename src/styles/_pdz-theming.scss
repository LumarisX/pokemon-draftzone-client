@use "sass:map";
@use "variables" as *;
@use "mixins" as *;
@use "shape" as *;
@use "layout" as *;
@use "shadows" as *;
@use "breakpoints" as *;
@use "typography" as *;
@use "base/tokens" as *;

@mixin apply-theme($theme) {
  @each $key, $value in $theme {
    @if map.has-key($core-tokens, $value) {
      --pdz-color-#{$key}: #{map.get($core-tokens, $value)};
    } @else {
      --pdz-color-#{$key}: #{$value};
    }
  }
}

:root {
  --pdz-screen-size-medium: $screen-size-medium;
  --pdz-screen-size-large: $screen-size-large;

  @each $level, $shadows in $shadows {
    --pdz-level-#{$level}: #{$shadows};
  }
  @each $name, $value in $shape {
    --pdz-shape-#{$name}: #{$value};
  }
  @each $name, $value in $spacing {
    --pdz-space-#{$name}: #{$value};
  }
  @each $name, $value in $fonts {
    --pdz-font-#{$name}: #{$value};
  }
  @each $name, $value in $font-size {
    --pdz-font-size-#{$name}: #{$value};
  }
  @each $name, $value in $line-height {
    --pdz-line-height-#{$name}: #{$value};
  }
  @include apply-typography(body-medium);
  @include apply-theme(map.get(map.get($themes, normal), light));
  @each $theme-name, $variations in $themes {
    @each $variation-name, $palette in $variations {
      &[pdz-theme="#{$theme-name}"][pdz-theme-mode="#{$variation-name}"] {
        @include apply-theme($palette);
      }
    }
  }
}
